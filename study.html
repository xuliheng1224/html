<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>Document</title>
	</head>

	<body>
		<div style="width:0px;height:0px;border-top:100px solid red;border-left:150px solid transparent;border-bottom:50px solid transparent;border-right:150px solid transparent;"></div>
		<div>
			<input type="button" value="播放" id='play'>
		</div>
		<audio id='audio' src="./audio/jj.mp3">
			你的浏览器不支持audio；
		</audio>
		<script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
		<script type="text/javascript" src='md.js'>
		</script>
		<script>
			//移动端返回上一页，页面刷新
			function myFunction(event) {
				//alert("页面是否从浏览器缓存中加载? " + event.persisted);
				if(event.persisted) {
					window.location.reload();
				}
			}
			window.addEventListener("pageshow", myFunction);

			//navigator.userAgent.indexOf来判断浏览器类型
			var ua = navigator.userAgent;
			//  if(ua.indexOf("Android")>0 || ua.indexOf("iPhone")>0 || ua.indexOf("iPad")>0){//移动端  
			//       
			//  }else{//pc端  
			//     
			//  }  
			function os() {
				let
					u = navigator.userAgent;
				return {
					webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
					mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
					ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
					android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
					iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
					windowPhone: u.indexOf("Windows Phone") >= 0,
					iPad: u.indexOf('iPad') > -1, //是否iPad
					iPod: u.indexOf('iPod') > -1, //是否iPod
					weChat: u.match(/MicroMessenger/i) !== null, //是否为微信
					bbLinkAPP: u.match(/BBLINKAPP/i) !== null ///是否为微笑妈咪APP
				};
			}
			console.log(os())
			//返回当前url的协议
			//  localtion.protocol
			function protocol(logtype, event = '', openid = true, hosId) {
				let apif = location.protocol + '//wifi.bblink.cn/springrx/getCloudClass'
				this.$http.post(apif, {
					log_type: logtype || '',
					hos_id: localStorage.getItem('hosId') || "",
					open_id: localStorage.getItem('openId'),
					event: event
				}, {
					headers: {},
					emulateJSON: true
				}).then((res) => {

				})
			}
			//调用的时候因为含有this，所以要这么写：
			//protocol.call(this,'a','b');

			//replace 替换
			function replace() {
				var appurl = 'abcerfghf';
				appurl = appurl.replace("ab", 'hs')
				console.log(appurl);
			}

			//查找私有属性 .hasOwnProperty();
			function private() {
				let a = {
					name: "xxx",
					age: "24"
				}
				let b = {
					name: 'hhh'
				}
				console.log('name' in a, 'age' in a);
				console.log('name' in b, 'age' in b);
				console.log(a.hasOwnProperty('name'), a.hasOwnProperty('age'));
				//in操作符会检查所有的私有属性和原型属性
				/* 小结：
				 查找属性（不区分属性来源）：in操作符
				 查找私有属性：对象的.hasOwnProperty()方法*/
			}
			//private();

			// 对象的访问器属性
			function accessor() {
				let test = {
					_cookie: 2,
					get cookie() {
						console.log('get cookie', this._cookie);
						return this._cookie;
					},
					set cookie(val) {
						// TODO 对_cookie和val进行判断是否有某个值再进行追加或则覆盖操作。
						// 字符串的操作这里就不多写了
						this._cookie = val;
						console.log('set cookie: ' + this._cookie);
						return val;
					}
				}
				test.cookie; // get cookie '' 这里执行了get的函数
				test.cookie = 1; // set cookie 1 1 这里执行了set的函数
			}
			//accessor();
			//audio
			/*   HTML5中的新元素标签:
			        src：音频文件路径。
			        preload：预加载（在页面被加载时进行加载或者说缓冲音频），如果使用了autoplay的话那么该属性失效
			        loop：设置音频是否要循环播放。
			        controls：属性供添加播放、暂停和音量控件。
			     常用的控制函数：
			        load()：加载音频、视频软件
			        play()：加载并播放音频、视频文件或重新播放暂停的的音频、视频
			        pause()：暂停出于播放状态的音频、视频文件
			        canPlayType(obj)：测试是否支持给定的Mini类型的文件
			     只读属性属性说明:
			        duration   获取媒体文件的播放时长，以s为单位，如果无法获取，则为NaN
			        paused     如果媒体文件被暂停，则返回true，否则返回false
			        ended       如果媒体文件播放完毕，则返回true
			        startTime  返回起始播放时间，一般是0.0，除非是缓冲过的媒体文件，并一部分内容已经不在缓冲区
			        error          在发生了错误后返回的错误代码
			        currentSrc  以字符串形式返回正在播放或已加载的文件，对应于浏览器在source元素中选择的文件 */
			var audio = document.getElementById('audio');
			var duration = audio.duration;
			$('#play').on('click', function() {
				playAudio();
			});

			function playAudio() {
				if(audio.paused) {
					audio.play()
					$('#play').val('暂停')
				} else {
					audio.pause()
					$('#play').val('播放')
				}
			}
			//6.检测客户端是安卓系统还是ios系统。
			var u = navigator.userAgent;
			var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1;
			var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);
			//      if(isAndroid){
			//      		alert("安卓系统")
			//      }
			//      if(isiOS){
			//      		alert("ios系统")
			//      }
			//解决苹果微信返回按钮不刷新
			pushHistory()

			function pushHistory() {
				window.addEventListener("popstate", function(e) {　　　　　 //这里监听到了后退事件
					self.location.reload();
				}, false);
				var state = {
					title: "",
					url: "#"
				};
				window.history.replaceState(state, "", "#");
			};
			//吸顶
			var a;
			window.addEventListener('scroll', function() {
				var class_sortTop = $('.class_sort').offset().top;
				var classification_top = $('.classification_list').offset().top;
				var scrollTop = $(window).scrollTop()
				if(scrollTop >= class_sortTop) {
					this.searchBarFixed = true
				}
				if(scrollTop <= classification_top && scrollTop <= class_sortTop) {
					a = 1;
                    this.searchBarFixed = false;
				}
			})
			//判断滚动条到达底部
			//用jquery来实现 
			$(window).scroll(function() {　　
				var scrollTop = $(this).scrollTop();　　
				var scrollHeight = $(document).height();　　
				var windowHeight = $(this).height();　　
				if(scrollTop + windowHeight == scrollHeight) {　　　　
					alert("已经到最底部了！");　　
				}
			});
			//splice返回的是被删除的项目
			var str = "2018-05-31 11:50"
			sarr = str.split("")
			sarr.splice(10, 0, "-")
			str = sarr.join("")
			console.log(str.replace("-", '年').replace('-', '月').replace('-', '日'))

			//md5 加密
			var aaa = "bblinktest00"
			var mac = ''
			var mac2 = ''
			if(aaa.indexOf(':') > -1) {
				mac = aaa
				mac2 = aaa.replace(/:/g, '')
			} else {
				mac2 = aaa
				mac = aaa.slice(0, 2) + ':' + aaa.slice(2, 4) + ':' + aaa.slice(4, 6) + ':' + aaa.slice(8, 10) + ':' + aaa.slice(10, 12)
			}
			mac = md5(mac)
			mac2 = md5(mac2)
			console.log(mac, mac2)
			console.log(md5("bblinktest00"))

			// 怎么判断一个对象是否为空
			var obj = {}
			// 1
			function judge(obj){
				for(var a in obj){
					return alert('非空对象')
				}
				return alert('空对象')
			}
			//2
			if(JSON.stringify(obj) == '{}') {
				console.log('空对象');
			}
			//3
			if(Object.keys(obj).length == 0) {

				console.log('空对象');

			} else {

				console.log('非空对象');

			}
		</script>
	</body>

</html>