webpackJsonp([11],{"+N6f":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("woOf"),i=a.n(s),l=a("NYxO"),o=a("s0MJ"),r={computed:Object(l.mapState)({testQuestion:function(t){return t.question.testQuestion}}),data:function(){return{contentTxt:"",form:{testType:"基本对错题",name:"",regionS:"",regionE:"",apply:"ANTENATAL",time:"0",startT:"",endT:""},optCheck:!1,questionArr:[{options:[{value:"SINGLE",label:"单选题"},{value:"MULTI",label:"多选题"},{value:"JUDGE",label:"判断题"},{value:"QA",label:"简答题"}],qType:"",textarea:"",tableData:[{opt:"A",optCon:"",val:"1",isTrue:!1,optionId:""}],delOpt:[],questionId:"",optAnswer:""}],tableAnswer:[{type:"全对了",AnswerResult:""},{type:"错了",AnswerResult:"很遗憾，您错了X道题"}],dialogVisible:!1,delTopicId:[]}},mounted:function(){KindEditor.ready(function(t){window.editor=t.create("#testEditor",{resizeType:0,filePostName:"img",uploadJson:"/msg/upload",dir:"image",afterUpload:function(t){console.log(t)}})}),this.$route.query.id&&this.getTestDetail()},methods:{jump:function(t){this.$router.push(t)},shiyongjied:function(t){this.form.regionS="",this.form.regionE=""},getTestDetail:function(){this.$store.dispatch("getTestDetail",{queId:this.$route.query.id,vue:this})},getContentTxt:function(){var t=[];t.push(UE.getEditor("testEditor").getContent()),this.contentTxt=t.join("\n")},addQuestion:function(){this.questionArr.push({options:[{value:"SINGLE",label:"单选题"},{value:"MULTI",label:"多选题"},{value:"JUDGE",label:"判断题"},{value:"QA",label:"简答题"}],qType:"",textarea:"",tableData:[{opt:"A",optCon:"",val:"1",isTrue:!1,optionId:""}],delOpt:[],questionId:"",optAnswer:""})},delQuestion:function(t,e){var a="";this.$route.query.id&&(this.testQuestion.topics.map(function(t){e.textarea===t.topic&&(a=t.topicId)}),this.delTopicId.push(a)),this.questionArr.splice(t,1)},moveUp:function(t){if(0===t)this.$message({message:"已经是最上面的一个了！！！",type:"success"});else{var e=i()({},this.questionArr[t]),a=i()({},this.questionArr[t-1]);this.questionArr.splice(t,1,a),this.questionArr.splice(t-1,1,e)}},moveDown:function(t){if(t+1===this.questionArr.length)this.$message({message:"已经是最后一个了！！！",type:"success"});else{var e=i()({},this.questionArr[t]),a=i()({},this.questionArr[t+1]);this.questionArr.splice(t,1,a),this.questionArr.splice(t+1,1,e)}},optAdd:function(t){if(5===this.questionArr[t].tableData.length)this.$message({message:"无更多选项了！！！",type:"success"});else{this.questionArr[t].tableData.push([{opt:"B",optCon:"",val:"2",isTrue:!1,optionId:""},{opt:"C",optCon:"",val:"3",isTrue:!1,optionId:""},{opt:"D",optCon:"",val:"4",isTrue:!1,optionId:""},{opt:"E",optCon:"",val:"5",isTrue:!1,optionId:""}][this.questionArr[t].tableData.length-1])}},optDel:function(t,e,a,s){var i=this;this.$route.query.id&&this.testQuestion.topics.map(function(e){a.textarea===e.topic&&e.options.map(function(e){e.queOption===s.optCon&&i.questionArr[t].delOpt.push(e.optionId)})}),this.questionArr[t].tableData.splice(e,1);for(var l=["A","B","C","D","E"],o=0;o<this.questionArr[t].tableData.length;o++)this.questionArr[t].tableData[o].opt=l[o]},optUp:function(t,e){if(0===e)this.$message({message:"已经是最上面的一个了！！！",type:"success"});else{var a=i()({},this.questionArr[t].tableData[e]),s=i()({},this.questionArr[t].tableData[e-1]),l=[];l.push(a.opt),l.push(s.opt),this.questionArr[t].tableData.splice(e,1,s),this.questionArr[t].tableData.splice(e-1,1,a),this.questionArr[t].tableData[e].opt=l[0],this.questionArr[t].tableData[e-1].opt=l[1]}},optDown:function(t,e){if(e+1===this.questionArr[t].tableData.length)this.$message({message:"已经是最后的一个了！！！",type:"success"});else{var a=i()({},this.questionArr[t].tableData[e]),s=i()({},this.questionArr[t].tableData[e+1]),l=[];l.push(a.opt),l.push(s.opt),this.questionArr[t].tableData.splice(e,1,s),this.questionArr[t].tableData.splice(e+1,1,a),this.questionArr[t].tableData[e].opt=l[0],this.questionArr[t].tableData[e+1].opt=l[1]}},holdData:function(t){var e=this;if(editor.sync(),this.contentTxt=$("#testEditor").val(),!this.form.name)return this.$message({message:"请输入测试名称",type:"warning"}),!1;if(!this.contentTxt)return this.$message({message:"请输入卷首语",type:"warning"}),!1;if(!this.form.regionS||!this.form.regionE)return this.$message({message:"请选择适用阶段",type:"warning"}),!1;if(Number(this.form.regionE)-Number(this.form.regionS)<0)return this.$message({message:"结束适用阶段不可小于开始适用阶段",type:"warning"}),!1;if("0"===this.form.time&&!this.form.startT||"0"===this.form.time&&!this.form.endT)return this.$message({message:"请选择生效时间",type:"warning"}),!1;if("0"===this.form.time&&new Date(o.tool.dateFormat(this.form.endT)).getTime()-new Date(o.tool.dateFormat(this.form.startT)).getTime()<0)return this.$message({message:"生效结束时间不可小于开始时间",type:"warning"}),!1;for(var a=0;a<this.questionArr.length;a++){if(!this.questionArr[a].qType)return this.$message({message:"请选择第"+(a+1)+"题的题目类型",type:"warning"}),!1;if(!this.questionArr[a].textarea)return this.$message({message:"请选择第"+(a+1)+"题的题干",type:"warning"}),!1;for(var s=0,i=0;i<this.questionArr[a].tableData.length;i++)if("QA"!==this.questionArr[a].qType){if(!this.questionArr[a].tableData[i].optCon)return this.$message({message:"请输入第"+(a+1)+"题"+this.questionArr[a].tableData[i].opt+"选项的选项内容",type:"warning"}),!1;if(this.questionArr[a].tableData[i].isTrue||s++,"MULTI"===this.questionArr[a].qType){if(s===this.questionArr[a].tableData.length)return this.$message({message:"请选择第"+(a+1)+"题的正确答案",type:"warning"}),!1}else if(!this.questionArr[a].optAnswer&&s===this.questionArr[a].tableData.length)return this.$message({message:"请选择第"+(a+1)+"题的正确答案",type:"warning"}),!1}}if(!this.tableAnswer[0].AnswerResult)return this.$message({message:"请输入结果文案",type:"warning"}),!1;var l=this.tableAnswer.map(function(t,a){return e.$route.query.id?{result:t.AnswerResult,resultType:"全对了"===t.type?"ALLRIGHT":"HASMISTAKE",resultId:e.testQuestion.results[a].resultId}:{result:t.AnswerResult,resultType:"全对了"===t.type?"ALLRIGHT":"HASMISTAKE"}}),r=this.questionArr.map(function(t,a){var s=t.tableData.map(function(e,a){var s="";return s="MULTI"===t.qType?e.isTrue?"Y":"N":e.val===t.optAnswer?"Y":"N",{optionMark:e.opt,queOption:e.optCon,sort:a,isAnswer:s,optionId:e.optionId}});return e.$route.query.id?{deletedOptionIds:t.delOpt.join(","),options:s,topic:t.textarea,type:t.qType,sort:a,topicId:t.questionId}:{options:s,topic:t.textarea,type:t.qType,sort:a}});this.$route.query.id?this.$store.dispatch("setQuestionList",{alwaysEffective:this.form.time,deletedTopicIds:this.delTopicId.join(","),des:this.contentTxt,endTime:"0"===this.form.time?o.tool.dateFormat(this.form.endT):"",startTime:"0"===this.form.time?o.tool.dateFormat(this.form.startT):"",gestationalRangeEnd:this.form.regionE,gestationalRangeStart:this.form.regionS,gestationalType:this.form.apply,que:this.form.name,queId:this.$route.query.id,results:l,topics:r,type:"TEST",status:t,vue:this}):this.$store.dispatch("setQuestionList",{alwaysEffective:this.form.time,des:this.contentTxt,endTime:"0"===this.form.time?o.tool.dateFormat(this.form.endT):"",startTime:"0"===this.form.time?o.tool.dateFormat(this.form.startT):"",gestationalRangeEnd:this.form.regionE,gestationalRangeStart:this.form.regionS,gestationalType:this.form.apply,que:this.form.name,results:l,topics:r,type:"TEST",status:t,vue:this})},preview:function(){editor.sync(),this.contentTxt=$("#testEditor").val();for(var t=0;t<this.questionArr.length;t++)if("MULTI"!==this.questionArr[t].qType)for(var e=0;e<this.questionArr[t].tableData.length;e++)this.questionArr[t].tableData[e].val===this.questionArr[t].optAnswer&&(this.questionArr[t].tableData[e].isTrue=!0);if(!this.form.name)return this.$message({message:"请输入测试名称",type:"warning"}),!1;if(!this.contentTxt)return this.$message({message:"请输入卷首语",type:"warning"}),!1;if(!this.form.regionS||!this.form.regionE)return this.$message({message:"请选择适用阶段",type:"warning"}),!1;if(Number(this.form.regionE)-Number(this.form.regionS)<0)return this.$message({message:"结束适用阶段不可小于开始适用阶段",type:"warning"}),!1;if("0"===this.form.time&&!this.form.startT||"0"===this.form.time&&!this.form.endT)return this.$message({message:"请选择生效时间",type:"warning"}),!1;if("0"===this.form.time&&new Date(o.tool.dateFormat(this.form.endT)).getTime()-new Date(o.tool.dateFormat(this.form.startT)).getTime()<0)return this.$message({message:"生效结束时间不可小于开始时间",type:"warning"}),!1;for(var a=0;a<this.questionArr.length;a++){if(!this.questionArr[a].qType)return this.$message({message:"请选择第"+(a+1)+"题的题目类型",type:"warning"}),!1;if(!this.questionArr[a].textarea)return this.$message({message:"请选择第"+(a+1)+"题的题干",type:"warning"}),!1;for(var s=0,i=0;i<this.questionArr[a].tableData.length;i++)if("QA"!==this.questionArr[a].qType){if(!this.questionArr[a].tableData[i].optCon)return this.$message({message:"请输入第"+(a+1)+"题"+this.questionArr[a].tableData[i].opt+"选项的选项内容",type:"warning"}),!1;if(this.questionArr[a].tableData[i].isTrue||s++,"MULTI"===this.questionArr[a].qType){if(s===this.questionArr[a].tableData.length)return this.$message({message:"请选择第"+(a+1)+"题的正确答案",type:"warning"}),!1}else if(!this.questionArr[a].optAnswer&&s===this.questionArr[a].tableData.length)return this.$message({message:"请选择第"+(a+1)+"题的正确答案",type:"warning"}),!1}}if(!this.tableAnswer[0].AnswerResult)return this.$message({message:"请输入结果文案",type:"warning"}),!1;this.dialogVisible=!0,setTimeout(function(){$("#preview_basic img").width(200)},0)},getcontentTxt1:function(){if(this.contentTxt)return this.contentTxt.replace(/(<([^>]+)>)/gi,"").replace(/&nbsp;/gi,"")},cancel:function(){this.$router.push({path:"/schoolInfo/testQuestionnaire"})},adaptation:function(){if("ANTENATAL"===this.form.apply)return"孕期"+this.form.regionS+" ~ "+this.form.regionS+"周";var t="",e="";switch(this.form.regionS){case"0":t="产后0天";break;case"42":t="产后42天";break;case"180":t="产后6个月";break;case"365":t="产后1年";break;case"720":t="产后2年";break;case"1095":t="产后3年"}switch(this.form.regionE){case"0":e="产后0天";break;case"42":e="产后42天";break;case"180":e="产后6个月";break;case"365":e="产后1年";break;case"720":e="产后2年";break;case"1095":e="产后3年"}return t+"~"+e},timeDate:function(){return"1"===this.form.time?"长期有效":o.tool.dateFormat(this.form.startT)+"~"+o.tool.dateFormat(this.form.endT)},typeFilter:function(t){switch(t){case"SINGLE":return"单选题";case"MULTI":return"多选题";case"JUDGE":return"判断题";case"QA":return"简答题"}}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"basic"}},[a("div",{staticClass:"baseInfo_main"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"测试类型"}},[a("div",{staticClass:"test_type"},[t._v("\n            "+t._s(t.form.testType)+" "),a("a",{staticStyle:{color:"blue","text-decoration":"none"},attrs:{href:"#"},on:{click:function(e){t.jump("testType")}}},[t._v("修改")])])]),t._v(" "),a("el-form-item",{attrs:{label:"测试名称"}},[a("el-input",{attrs:{placeholder:"请输入测试名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"==typeof e?e.trim():e)},expression:"form.name"}})],1),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{width:"68px","margin-right":"12px","text-align":"right",color:"#606266","font-size":"14px"}},[t._v("卷首语")]),t._v(" "),a("textarea",{staticStyle:{width:"1580px",height:"300px"},attrs:{id:"testEditor",name:"content"}})]),t._v(" "),a("el-form-item",{attrs:{label:"适用阶段"}},[a("el-radio-group",{model:{value:t.form.apply,callback:function(e){t.$set(t.form,"apply",e)},expression:"form.apply"}},[a("el-radio",{attrs:{label:"ANTENATAL"},on:{change:t.shiyongjied}},[t._v("孕期")]),t._v(" "),a("el-radio",{attrs:{label:"POSTPARTUM"},on:{change:t.shiyongjied}},[t._v("育儿")])],1)],1),t._v(" "),"ANTENATAL"==t.form.apply?a("el-form-item",{attrs:{label:""}},[a("el-col",{attrs:{span:11}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.regionS,callback:function(e){t.$set(t.form,"regionS",e)},expression:"form.regionS"}},[a("el-option",{attrs:{label:"1",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"2",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"3",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"4",value:"4"}}),t._v(" "),a("el-option",{attrs:{label:"5",value:"5"}}),t._v(" "),a("el-option",{attrs:{label:"6",value:"6"}}),t._v(" "),a("el-option",{attrs:{label:"7",value:"7"}}),t._v(" "),a("el-option",{attrs:{label:"8",value:"8"}}),t._v(" "),a("el-option",{attrs:{label:"9",value:"9"}}),t._v(" "),a("el-option",{attrs:{label:"10",value:"10"}}),t._v(" "),a("el-option",{attrs:{label:"11",value:"11"}}),t._v(" "),a("el-option",{attrs:{label:"12",value:"12"}}),t._v(" "),a("el-option",{attrs:{label:"13",value:"13"}}),t._v(" "),a("el-option",{attrs:{label:"14",value:"14"}}),t._v(" "),a("el-option",{attrs:{label:"15",value:"15"}}),t._v(" "),a("el-option",{attrs:{label:"16",value:"16"}}),t._v(" "),a("el-option",{attrs:{label:"17",value:"17"}}),t._v(" "),a("el-option",{attrs:{label:"18",value:"18"}}),t._v(" "),a("el-option",{attrs:{label:"19",value:"19"}}),t._v(" "),a("el-option",{attrs:{label:"20",value:"20"}}),t._v(" "),a("el-option",{attrs:{label:"21",value:"21"}}),t._v(" "),a("el-option",{attrs:{label:"22",value:"22"}}),t._v(" "),a("el-option",{attrs:{label:"23",value:"23"}}),t._v(" "),a("el-option",{attrs:{label:"24",value:"24"}}),t._v(" "),a("el-option",{attrs:{label:"25",value:"25"}}),t._v(" "),a("el-option",{attrs:{label:"26",value:"26"}}),t._v(" "),a("el-option",{attrs:{label:"27",value:"27"}}),t._v(" "),a("el-option",{attrs:{label:"28",value:"28"}}),t._v(" "),a("el-option",{attrs:{label:"29",value:"29"}}),t._v(" "),a("el-option",{attrs:{label:"30",value:"30"}}),t._v(" "),a("el-option",{attrs:{label:"31",value:"31"}}),t._v(" "),a("el-option",{attrs:{label:"32",value:"32"}}),t._v(" "),a("el-option",{attrs:{label:"33",value:"33"}}),t._v(" "),a("el-option",{attrs:{label:"34",value:"34"}}),t._v(" "),a("el-option",{attrs:{label:"35",value:"35"}}),t._v(" "),a("el-option",{attrs:{label:"36",value:"36"}}),t._v(" "),a("el-option",{attrs:{label:"37",value:"37"}}),t._v(" "),a("el-option",{attrs:{label:"38",value:"38"}}),t._v(" "),a("el-option",{attrs:{label:"39",value:"39"}}),t._v(" "),a("el-option",{attrs:{label:"40",value:"40"}})],1)],1),t._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[t._v("至")]),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.regionE,callback:function(e){t.$set(t.form,"regionE",e)},expression:"form.regionE"}},[a("el-option",{attrs:{label:"1",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"2",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"3",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"4",value:"4"}}),t._v(" "),a("el-option",{attrs:{label:"5",value:"5"}}),t._v(" "),a("el-option",{attrs:{label:"6",value:"6"}}),t._v(" "),a("el-option",{attrs:{label:"7",value:"7"}}),t._v(" "),a("el-option",{attrs:{label:"8",value:"8"}}),t._v(" "),a("el-option",{attrs:{label:"9",value:"9"}}),t._v(" "),a("el-option",{attrs:{label:"10",value:"10"}}),t._v(" "),a("el-option",{attrs:{label:"11",value:"11"}}),t._v(" "),a("el-option",{attrs:{label:"12",value:"12"}}),t._v(" "),a("el-option",{attrs:{label:"13",value:"13"}}),t._v(" "),a("el-option",{attrs:{label:"14",value:"14"}}),t._v(" "),a("el-option",{attrs:{label:"15",value:"15"}}),t._v(" "),a("el-option",{attrs:{label:"16",value:"16"}}),t._v(" "),a("el-option",{attrs:{label:"17",value:"17"}}),t._v(" "),a("el-option",{attrs:{label:"18",value:"18"}}),t._v(" "),a("el-option",{attrs:{label:"19",value:"19"}}),t._v(" "),a("el-option",{attrs:{label:"20",value:"20"}}),t._v(" "),a("el-option",{attrs:{label:"21",value:"21"}}),t._v(" "),a("el-option",{attrs:{label:"22",value:"22"}}),t._v(" "),a("el-option",{attrs:{label:"23",value:"23"}}),t._v(" "),a("el-option",{attrs:{label:"24",value:"24"}}),t._v(" "),a("el-option",{attrs:{label:"25",value:"25"}}),t._v(" "),a("el-option",{attrs:{label:"26",value:"26"}}),t._v(" "),a("el-option",{attrs:{label:"27",value:"27"}}),t._v(" "),a("el-option",{attrs:{label:"28",value:"28"}}),t._v(" "),a("el-option",{attrs:{label:"29",value:"29"}}),t._v(" "),a("el-option",{attrs:{label:"30",value:"30"}}),t._v(" "),a("el-option",{attrs:{label:"31",value:"31"}}),t._v(" "),a("el-option",{attrs:{label:"32",value:"32"}}),t._v(" "),a("el-option",{attrs:{label:"33",value:"33"}}),t._v(" "),a("el-option",{attrs:{label:"34",value:"34"}}),t._v(" "),a("el-option",{attrs:{label:"35",value:"35"}}),t._v(" "),a("el-option",{attrs:{label:"36",value:"36"}}),t._v(" "),a("el-option",{attrs:{label:"37",value:"37"}}),t._v(" "),a("el-option",{attrs:{label:"38",value:"38"}}),t._v(" "),a("el-option",{attrs:{label:"39",value:"39"}}),t._v(" "),a("el-option",{attrs:{label:"40",value:"40"}})],1)],1)],1):t._e(),t._v(" "),"POSTPARTUM"==t.form.apply?a("el-form-item",{attrs:{label:""}},[a("el-col",{attrs:{span:11}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.regionS,callback:function(e){t.$set(t.form,"regionS",e)},expression:"form.regionS"}},[a("el-option",{attrs:{label:"产后0天",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"产后42天",value:"42"}}),t._v(" "),a("el-option",{attrs:{label:"产后6个月",value:"180"}}),t._v(" "),a("el-option",{attrs:{label:"产后1年",value:"365"}}),t._v(" "),a("el-option",{attrs:{label:"产后2年",value:"720"}}),t._v(" "),a("el-option",{attrs:{label:"产后3年",value:"1095"}})],1)],1),t._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[t._v("至")]),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.regionE,callback:function(e){t.$set(t.form,"regionE",e)},expression:"form.regionE"}},[a("el-option",{attrs:{label:"产后0天",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"产后42天",value:"42"}}),t._v(" "),a("el-option",{attrs:{label:"产后6个月",value:"180"}}),t._v(" "),a("el-option",{attrs:{label:"产后1年",value:"365"}}),t._v(" "),a("el-option",{attrs:{label:"产后2年",value:"720"}}),t._v(" "),a("el-option",{attrs:{label:"产后3年",value:"1095"}})],1)],1)],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"生效时间"}},[a("el-radio-group",{model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}},[a("el-radio",{attrs:{label:"0"}},[t._v("自定义时间")]),t._v(" "),a("el-radio",{attrs:{label:"1"}},[t._v("长期有效")])],1)],1),t._v(" "),"0"==t.form.time?a("el-form-item",{attrs:{label:""}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始日期时间"},model:{value:t.form.startT,callback:function(e){t.$set(t.form,"startT",e)},expression:"form.startT"}})],1),t._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[t._v("-")]),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束日期时间"},model:{value:t.form.endT,callback:function(e){t.$set(t.form,"endT",e)},expression:"form.endT"}})],1)],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"说明"}},[a("div",{staticClass:"explain"},[a("div",[t._v("1、每个选项可配置分数，根据用户选择的选项将所对应的分数全部累加起来，按照分数来匹配结果文案并展示。")]),t._v(" "),a("div",[t._v("2、选项分数不会在用户端展示，只作为测试的逻辑设置。")]),t._v(" "),a("div",[t._v("3、选项分数请输入阿拉伯数字，若不填，将默认为 0。")])])])],1)],1),t._v(" "),t._l(t.questionArr,function(e,s){return a("div",{key:s,attrs:{id:"basic_question"}},[a("div",{staticClass:"main_title"},[a("div",{staticClass:"question_title question_p"},[t._v("题目"+t._s(s+1))]),t._v(" "),a("div",{staticClass:"icons_con"},[a("div",{staticClass:"icons",on:{click:t.addQuestion}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("div",{staticClass:"icons",on:{click:function(e){t.moveUp(s)}}},[a("i",{staticClass:"el-icon-arrow-up"})]),t._v(" "),a("div",{staticClass:"icons",on:{click:function(e){t.moveDown(s)}}},[a("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),a("div",{on:{click:function(a){t.delQuestion(s,e)}}},[a("i",{staticClass:"el-icon-delete"})])])]),t._v(" "),a("div",{staticClass:"baseInfo_main"},[a("div",{staticClass:"q_main"},[a("div",{staticClass:"q_name"},[t._v("题目类型")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择题目类型"},model:{value:e.qType,callback:function(a){t.$set(e,"qType",a)},expression:"item.qType"}},t._l(e.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"q_main"},[a("div",{staticClass:"q_name"},[t._v("题干")]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入题干"},model:{value:e.textarea,callback:function(a){t.$set(e,"textarea","string"==typeof a?a.trim():a)},expression:"item.textarea"}})],1),t._v(" "),"QA"!=e.qType?a("div",{staticStyle:{"margin-left":"20px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"opt",label:"选项",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"选项内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{placeholder:"请输入选项内容"},model:{value:e.row.optCon,callback:function(a){t.$set(e.row,"optCon","string"==typeof a?a.trim():a)},expression:"scope.row.optCon"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"正确答案"},scopedSlots:t._u([{key:"default",fn:function(s){return["MULTI"!=e.qType?a("el-radio",{attrs:{label:s.row.val},model:{value:e.optAnswer,callback:function(a){t.$set(e,"optAnswer",a)},expression:"item.optAnswer"}}):a("el-checkbox",{model:{value:s.row.isTrue,callback:function(e){t.$set(s.row,"isTrue",e)},expression:"scope.row.isTrue"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(i){return[a("div",{staticStyle:{color:"#3C93E2","font-size":"25px"}},[a("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(e){t.optAdd(s)}}}),t._v(" "),a("i",{staticClass:"el-icon-arrow-up",on:{click:function(e){t.optUp(s,i.$index)}}}),t._v(" "),a("i",{staticClass:"el-icon-arrow-down",on:{click:function(e){t.optDown(s,i.$index)}}}),t._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:function(a){t.optDel(s,i.$index,e,i.row)}}})])]}}])})],1)],1):t._e()])])}),t._v(" "),a("div",{staticClass:"question_title",staticStyle:{padding:"20px 0"}},[t._v("结果文案")]),t._v(" "),a("div",{staticClass:"baseInfo_main"},[a("div",{staticStyle:{"margin-left":"20px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableAnswer,border:""}},[a("el-table-column",{attrs:{label:"类型",width:"200",prop:"type"}}),t._v(" "),a("el-table-column",{attrs:{label:"结果文案"},scopedSlots:t._u([{key:"default",fn:function(e){return["全对了"==e.row.type?a("el-input",{attrs:{placeholder:"请输入结果文案"},model:{value:e.row.AnswerResult,callback:function(a){t.$set(e.row,"AnswerResult","string"==typeof a?a.trim():a)},expression:"scope.row.AnswerResult"}}):a("span",[t._v(t._s(e.row.AnswerResult))])]}}])})],1),t._v(" "),a("div",{staticStyle:{margin:"50px  0 40px 0"}},[a("el-button",{attrs:{type:"primary",round:""},on:{click:t.preview}},[t._v("预览")]),t._v(" "),a("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){t.holdData("PUBLISH")}}},[t._v("保存并发布")]),t._v(" "),a("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){t.holdData("NORMAL")}}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{round:""},on:{click:t.cancel}},[t._v("取消")])],1)],1)]),t._v(" "),a("el-dialog",{attrs:{title:"预览",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",[a("div",{staticClass:"preview_height"},[a("span",{staticClass:"preview_name"},[t._v("测试类型:")]),t._v(" "),a("span",[t._v(t._s(t.form.testType))])]),t._v(" "),a("div",{staticClass:"preview_height"},[a("span",{staticClass:"preview_name"},[t._v("测试名称:")]),t._v(" "),a("span",[t._v(t._s(t.form.name))])]),t._v(" "),a("div",{staticClass:"preview_height"},[a("span",{staticClass:"preview_name"},[t._v("卷首语:")]),t._v(" "),a("div",{staticStyle:{display:"inline-grid","min-width":"500px","word-break":"break-all"},attrs:{id:"preview_basic"},domProps:{innerHTML:t._s(t.contentTxt)}})]),t._v(" "),a("div",{staticClass:"preview_height"},[a("span",{staticClass:"preview_name"},[t._v("适应阶段:")]),t._v(" "),a("span",[t._v(t._s(t.adaptation()))])]),t._v(" "),a("div",{staticClass:"preview_height",staticStyle:{"margin-bottom":"30px"}},[a("span",{staticClass:"preview_name"},[t._v("有效期:")]),t._v(" "),a("span",[t._v(t._s(t.timeDate()))])]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"30px"}},t._l(t.questionArr,function(e,s){return a("div",{key:s},[a("div",{staticClass:"preview_height preview_l"},[a("span",[t._v("Q"+t._s(s+1)+"、")]),t._v(" "),a("span",{staticClass:"preview_t"},[t._v("("+t._s(t.typeFilter(e.qType))+")")]),t._v(" "),a("span",[t._v(t._s(e.textarea))])]),t._v(" "),t._l(e.tableData,function(s,i){return a("div",{key:i+86431},["QA"!=e.qType?a("div",{staticClass:"preview_height preview_opt_l",class:[s.isTrue?"preview_score":""]},[a("span",[t._v(t._s(s.opt)+"、")]),t._v(" "),a("span",[t._v(t._s(s.optCon))]),t._v(" "),s.isTrue?a("span",{staticClass:"preview_correct"},[t._v("正确")]):t._e()]):t._e()])})],2)})),t._v(" "),t._l(t.tableAnswer,function(e,s){return a("div",{key:s+15807},[a("div",{staticClass:"preview_height preview_l"},[a("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(e.type)+":")]),t._v(" "),a("span",[t._v(t._s(e.AnswerResult))])])])})],2),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)])],2)},staticRenderFns:[]};var p=a("VU/8")(r,n,!1,function(t){a("ae96"),a("UbSc")},"data-v-bc6ba08c",null);e.default=p.exports},UbSc:function(t,e){},ae96:function(t,e){}});