webpackJsonp([18],{XqfA:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("woOf"),i=s.n(a),o=s("NYxO"),l=s("s0MJ"),r={computed:Object(o.mapState)({matchQuestion:function(t){return t.question.testQuestion}}),data:function(){return{contentTxt:"",form:{testType:"选项得分匹配题",name:"",regionS:"",regionE:"",apply:"ANTENATAL",time:"0",startT:"",endT:""},questionArr:[{delOptId:[],options:[{value:"SINGLE",label:"单选题"},{value:"MULTI",label:"多选题"},{value:"JUDGE",label:"判断题"},{value:"QA",label:"简答题"}],qType:"",textarea:"",tableData:[{opt:"A",optCon:"",score:"",optId:""}],topicId:""}],tableAnswer:[{scoreS:"",scoreE:"",AnswerResult:"",AnswerId:""}],dialogVisible:!1,deldResultIds:[],delTopicId:[]}},mounted:function(){KindEditor.ready(function(t){window.editor=t.create("#editor",{resizeType:0,filePostName:"img",uploadJson:"/msg/upload",dir:"image",afterCreate:function(){this.sync()},afterBlur:function(){this.sync()},afterUpload:function(t){console.log(t)}})});var t=this;this.$route.query.id&&setTimeout(function(){t.getMatchDetail()},100)},methods:{jump:function(t){this.$router.push(t)},shiyongjied:function(t){this.form.regionS="",this.form.regionE=""},getMatchDetail:function(){this.$store.dispatch("getMatchDetail",{queId:this.$route.query.id,vue:this})},getContentTxt:function(){this.contentTxt=[].join("\n")},addQuestion:function(){this.questionArr.push({delOptId:[],options:[{value:"SINGLE",label:"单选题"},{value:"MULTI",label:"多选题"},{value:"JUDGE",label:"判断题"},{value:"QA",label:"简答题"}],qType:"",textarea:"",tableData:[{opt:"A",optCon:"",score:"",optId:""}],topicId:""})},delQuestion:function(t,e){var s="";this.$route.query.id&&(this.matchQuestion.topics.map(function(t){e.textarea===t.topic&&(s=t.topicId)}),this.delTopicId.push(s)),this.questionArr.splice(t,1)},moveUp:function(t){if(0===t)this.$message({message:"已经是最上面的一个了！！！",type:"success"});else{var e=i()({},this.questionArr[t]),s=i()({},this.questionArr[t-1]);this.questionArr.splice(t,1,s),this.questionArr.splice(t-1,1,e)}},moveDown:function(t){if(t+1===this.questionArr.length)this.$message({message:"已经是最后一个了！！！",type:"success"});else{var e=i()({},this.questionArr[t]),s=i()({},this.questionArr[t+1]);this.questionArr.splice(t,1,s),this.questionArr.splice(t+1,1,e)}},optAdd:function(t){if(5===this.questionArr[t].tableData.length)this.$message({message:"无更多选项了！！！",type:"success"});else{this.questionArr[t].tableData.push([{opt:"B",optCon:"",score:"",optId:""},{opt:"C",optCon:"",score:"",optId:""},{opt:"D",optCon:"",score:"",optId:""},{opt:"E",optCon:"",score:"",optId:""}][this.questionArr[t].tableData.length-1])}},optDel:function(t,e,s,a){var i=this;this.$route.query.id&&this.matchQuestion.topics.map(function(e){s.textarea===e.topic&&e.options.map(function(e){e.queOption===a.optCon&&i.questionArr[t].delOptId.push(e.optionId)})}),this.questionArr[t].tableData.splice(e,1);for(var o=["A","B","C","D","E"],l=0;l<this.questionArr[t].tableData.length;l++)this.questionArr[t].tableData[l].opt=o[l]},optUp:function(t,e){if(0===e)this.$message({message:"已经是最上面的一个了！！！",type:"success"});else{var s=i()({},this.questionArr[t].tableData[e]),a=i()({},this.questionArr[t].tableData[e-1]),o=[];o.push(s.opt),o.push(a.opt),this.questionArr[t].tableData.splice(e,1,a),this.questionArr[t].tableData.splice(e-1,1,s),this.questionArr[t].tableData[e].opt=o[0],this.questionArr[t].tableData[e-1].opt=o[1]}},optDown:function(t,e){if(e+1===this.questionArr[t].tableData.length)this.$message({message:"已经是最后的一个了！！！",type:"success"});else{var s=i()({},this.questionArr[t].tableData[e]),a=i()({},this.questionArr[t].tableData[e+1]),o=[];o.push(s.opt),o.push(a.opt),this.questionArr[t].tableData.splice(e,1,a),this.questionArr[t].tableData.splice(e+1,1,s),this.questionArr[t].tableData[e].opt=o[0],this.questionArr[t].tableData[e+1].opt=o[1]}},answerAdd:function(){this.tableAnswer.push({scoreS:"",scoreE:"",AnswerResult:"",AnswerId:""})},answerDel:function(t,e){this.deldResultIds.push(e.AnswerId),this.tableAnswer.splice(t,1)},holdData:function(t){var e=this;if(editor.sync(),this.contentTxt=$("#editor").val(),!this.form.name)return this.$message({message:"请输入测试名称",type:"warning"}),!1;if(!this.contentTxt)return this.$message({message:"请输入卷首语",type:"warning"}),!1;if(!this.form.regionS||!this.form.regionE)return this.$message({message:"请选择适用阶段",type:"warning"}),!1;if(Number(this.form.regionE)-Number(this.form.regionS)<0)return this.$message({message:"结束适用阶段不可小于开始适用阶段",type:"warning"}),!1;if("0"===this.form.time&&!this.form.startT||"0"===this.form.time&&!this.form.endT)return this.$message({message:"请选择生效时间",type:"warning"}),!1;if("0"===this.form.time&&new Date(l.tool.dateFormat(this.form.endT)).getTime()-new Date(l.tool.dateFormat(this.form.startT)).getTime()<0)return this.$message({message:"生效结束时间不可小于开始时间",type:"warning"}),!1;for(var s=0;s<this.questionArr.length;s++){if(!this.questionArr[s].qType)return this.$message({message:"请选择第"+(s+1)+"题的题目类型",type:"warning"}),!1;if(!this.questionArr[s].textarea)return this.$message({message:"请选择第"+(s+1)+"题的题干",type:"warning"}),!1;for(var a=0;a<this.questionArr[s].tableData.length;a++)if("QA"!==this.questionArr[s].qType){if(!this.questionArr[s].tableData[a].optCon)return this.$message({message:"请输入第"+(s+1)+"题"+this.questionArr[s].tableData[a].opt+"选项的选项内容",type:"warning"}),!1;if(!this.questionArr[s].tableData[a].score&&0!==this.questionArr[s].tableData[a].score)return this.$message({message:"请输入第"+(s+1)+"题"+this.questionArr[s].tableData[a].opt+"选项的选项得分",type:"warning"}),!1}}for(var i=0;i<this.tableAnswer.length;i++){if(!this.tableAnswer[i].scoreS&&0!==this.tableAnswer[i].scoreS||!this.tableAnswer[i].scoreE&&this.tableAnswer[i].scoreE,!this.tableAnswer[i].scoreS&&0!==this.tableAnswer[i].scoreS||!this.tableAnswer[i].scoreE&&0!==this.tableAnswer[i].scoreE)return this.$message({message:"请输入第"+(i+1)+"条结果文案的得分区间",type:"warning"}),!1;if(!this.tableAnswer[i].AnswerResult)return this.$message({message:"请输入第"+(i+1)+"条的结果文案",type:"warning"}),!1}var o=this.tableAnswer.map(function(t){return e.$route.query.id?{result:t.AnswerResult,resultType:"SCORE",scoreEnd:t.scoreE,scoreStart:t.scoreS,resultId:t.AnswerId}:{result:t.AnswerResult,resultType:"SCORE",scoreEnd:t.scoreE,scoreStart:t.scoreS}}),r=this.questionArr.map(function(t,s){var a=t.tableData.map(function(t,s){var a=t.optCon+"-"+t.score;return e.$route.query.id?{optionMark:t.opt,queOption:a,sort:s,optionId:t.optId}:{optionMark:t.opt,queOption:a,sort:s}});return e.$route.query.id?{deletedOptionIds:t.delOptId.join(","),options:a,topic:t.textarea,type:t.qType,sort:s,topicId:t.topicId}:{options:a,topic:t.textarea,type:t.qType,sort:s}});this.$route.query.id?this.$store.dispatch("setQuestionList",{deletedTopicIds:this.delTopicId.join(","),queId:this.$route.query.id,deletedResultIds:this.deldResultIds.join(","),alwaysEffective:this.form.time,des:this.contentTxt,endTime:"0"===this.form.time?l.tool.dateFormat(this.form.endT):"",startTime:"0"===this.form.time?l.tool.dateFormat(this.form.startT):"",gestationalRangeEnd:this.form.regionE,gestationalRangeStart:this.form.regionS,gestationalType:this.form.apply,que:this.form.name,results:o,topics:r,type:"SURVEY",status:t,vue:this}):this.$store.dispatch("setQuestionList",{alwaysEffective:this.form.time,des:this.contentTxt,endTime:"0"===this.form.time?l.tool.dateFormat(this.form.endT):"",startTime:"0"===this.form.time?l.tool.dateFormat(this.form.startT):"",gestationalRangeEnd:this.form.regionE,gestationalRangeStart:this.form.regionS,gestationalType:this.form.apply,que:this.form.name,results:o,topics:r,type:"SURVEY",status:t,vue:this})},preview:function(){editor.sync(),this.contentTxt=$("#editor").val();var t=new RegExp(/^\d+$/);if(!this.form.name)return this.$message({message:"请输入测试名称",type:"warning"}),!1;if(!this.contentTxt)return this.$message({message:"请输入卷首语",type:"warning"}),!1;if(!this.form.regionS||!this.form.regionE)return this.$message({message:"请选择适用阶段",type:"warning"}),!1;if(Number(this.form.regionE)-Number(this.form.regionS)<0)return this.$message({message:"结束适用阶段不可小于开始适用阶段",type:"warning"}),!1;if("0"===this.form.time&&!this.form.startT||"0"===this.form.time&&!this.form.endT)return this.$message({message:"请选择生效时间",type:"warning"}),!1;if("0"===this.form.time&&new Date(l.tool.dateFormat(this.form.endT)).getTime()-new Date(l.tool.dateFormat(this.form.startT)).getTime()<0)return this.$message({message:"生效结束时间不可小于开始时间",type:"warning"}),!1;for(var e=0;e<this.questionArr.length;e++){if(!this.questionArr[e].qType)return this.$message({message:"请选择第"+(e+1)+"题的题目类型",type:"warning"}),!1;if(!this.questionArr[e].textarea)return this.$message({message:"请选择第"+(e+1)+"题的题干",type:"warning"}),!1;for(var s=0;s<this.questionArr[e].tableData.length;s++)if("QA"!==this.questionArr[e].qType){if(!this.questionArr[e].tableData[s].optCon)return this.$message({message:"请输入第"+(e+1)+"题"+this.questionArr[e].tableData[s].opt+"选项的选项内容",type:"warning"}),!1;if(!this.questionArr[e].tableData[s].score&&0!==this.questionArr[e].tableData[s].score)return this.$message({message:"请输入第"+(e+1)+"题"+this.questionArr[e].tableData[s].opt+"选项的选项得分",type:"warning"}),!1;if(!t.test(this.questionArr[e].tableData[s].score))return this.$message({message:"第"+(e+1)+"题"+this.questionArr[e].tableData[s].opt+"选项只能输入数字",type:"warning"}),!1}}for(var a=0;a<this.tableAnswer.length;a++){if(!this.tableAnswer[a].scoreS&&0!==this.tableAnswer[a].scoreS||!this.tableAnswer[a].scoreE&&0!==this.tableAnswer[a].scoreE)return this.$message({message:"请输入第"+(a+1)+"条结果文案的得分区间",type:"warning"}),!1;if(!t.test(this.tableAnswer[a].scoreS))return this.$message({message:"第"+(a+1)+"条结果文案的得分区间只能输入数字",type:"warning"}),!1;if(!this.tableAnswer[a].AnswerResult)return this.$message({message:"请输入第"+(a+1)+"条的结果文案",type:"warning"}),!1}this.dialogVisible=!0,setTimeout(function(){$("#preview_con img").width(200)},0)},getcontentTxt1:function(){console.log(this.contentTxt);if(this.contentTxt)return this.contentTxt.replace(/(<([^>]+)>)/gi,"").replace(/&nbsp;/gi,"")},cancel:function(){this.$router.push({path:"/schoolInfo/testQuestionnaire"})},adaptation:function(){if("ANTENATAL"===this.form.apply)return"孕期"+this.form.regionS+" ~ "+this.form.regionS+"周";var t="",e="";switch(this.form.regionS){case"0":t="产后0天";break;case"42":t="产后42天";break;case"180":t="产后6个月";break;case"365":t="产后1年";break;case"720":t="产后2年";break;case"1095":t="产后3年"}switch(this.form.regionE){case"0":e="产后0天";break;case"42":e="产后42天";break;case"180":e="产后6个月";break;case"365":e="产后1年";break;case"720":e="产后2年";break;case"1095":e="产后3年"}return t+"~"+e},timeDate:function(){return"1"===this.form.time?"长期有效":l.tool.dateFormat(this.form.startT)+"~"+l.tool.dateFormat(this.form.endT)},typeFilter:function(t){switch(t){case"SINGLE":return"单选题";case"MULTI":return"多选题";case"JUDGE":return"判断题";case"QA":return"简答题"}}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"baseInfo_main"},[s("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"测试类型"}},[s("div",{staticClass:"test_type"},[t._v("\n            "+t._s(t.form.testType)+" "),s("a",{staticStyle:{color:"blue","text-decoration":"none"},attrs:{href:"#"},on:{click:function(e){t.jump("testType")}}},[t._v("修改")])])]),t._v(" "),s("el-form-item",{attrs:{label:"测试名称"}},[s("el-input",{attrs:{placeholder:"请输入测试名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"==typeof e?e.trim():e)},expression:"form.name"}})],1),t._v(" "),s("div",{staticStyle:{display:"flex"}},[s("div",{staticStyle:{width:"68px","margin-right":"12px","text-align":"right",color:"#606266","font-size":"14px"}},[t._v("卷首语")]),t._v(" "),s("textarea",{staticStyle:{width:"100%",height:"300px"},attrs:{id:"editor",name:"content"}})]),t._v(" "),s("el-form-item",{attrs:{label:"适用阶段"}},[s("el-radio-group",{model:{value:t.form.apply,callback:function(e){t.$set(t.form,"apply",e)},expression:"form.apply"}},[s("el-radio",{attrs:{label:"ANTENATAL"},on:{change:t.shiyongjied}},[t._v("孕期")]),t._v(" "),s("el-radio",{attrs:{label:"POSTPARTUM"},on:{change:t.shiyongjied}},[t._v("育儿")])],1)],1),t._v(" "),"ANTENATAL"==t.form.apply?s("el-form-item",{attrs:{label:""}},[s("el-col",{attrs:{span:11}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.regionS,callback:function(e){t.$set(t.form,"regionS",e)},expression:"form.regionS"}},[s("el-option",{attrs:{label:"1",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"2",value:"2"}}),t._v(" "),s("el-option",{attrs:{label:"3",value:"3"}}),t._v(" "),s("el-option",{attrs:{label:"4",value:"4"}}),t._v(" "),s("el-option",{attrs:{label:"5",value:"5"}}),t._v(" "),s("el-option",{attrs:{label:"6",value:"6"}}),t._v(" "),s("el-option",{attrs:{label:"7",value:"7"}}),t._v(" "),s("el-option",{attrs:{label:"8",value:"8"}}),t._v(" "),s("el-option",{attrs:{label:"9",value:"9"}}),t._v(" "),s("el-option",{attrs:{label:"10",value:"10"}}),t._v(" "),s("el-option",{attrs:{label:"11",value:"11"}}),t._v(" "),s("el-option",{attrs:{label:"12",value:"12"}}),t._v(" "),s("el-option",{attrs:{label:"13",value:"13"}}),t._v(" "),s("el-option",{attrs:{label:"14",value:"14"}}),t._v(" "),s("el-option",{attrs:{label:"15",value:"15"}}),t._v(" "),s("el-option",{attrs:{label:"16",value:"16"}}),t._v(" "),s("el-option",{attrs:{label:"17",value:"17"}}),t._v(" "),s("el-option",{attrs:{label:"18",value:"18"}}),t._v(" "),s("el-option",{attrs:{label:"19",value:"19"}}),t._v(" "),s("el-option",{attrs:{label:"20",value:"20"}}),t._v(" "),s("el-option",{attrs:{label:"21",value:"21"}}),t._v(" "),s("el-option",{attrs:{label:"22",value:"22"}}),t._v(" "),s("el-option",{attrs:{label:"23",value:"23"}}),t._v(" "),s("el-option",{attrs:{label:"24",value:"24"}}),t._v(" "),s("el-option",{attrs:{label:"25",value:"25"}}),t._v(" "),s("el-option",{attrs:{label:"26",value:"26"}}),t._v(" "),s("el-option",{attrs:{label:"27",value:"27"}}),t._v(" "),s("el-option",{attrs:{label:"28",value:"28"}}),t._v(" "),s("el-option",{attrs:{label:"29",value:"29"}}),t._v(" "),s("el-option",{attrs:{label:"30",value:"30"}}),t._v(" "),s("el-option",{attrs:{label:"31",value:"31"}}),t._v(" "),s("el-option",{attrs:{label:"32",value:"32"}}),t._v(" "),s("el-option",{attrs:{label:"33",value:"33"}}),t._v(" "),s("el-option",{attrs:{label:"34",value:"34"}}),t._v(" "),s("el-option",{attrs:{label:"35",value:"35"}}),t._v(" "),s("el-option",{attrs:{label:"36",value:"36"}}),t._v(" "),s("el-option",{attrs:{label:"37",value:"37"}}),t._v(" "),s("el-option",{attrs:{label:"38",value:"38"}}),t._v(" "),s("el-option",{attrs:{label:"39",value:"39"}}),t._v(" "),s("el-option",{attrs:{label:"40",value:"40"}})],1)],1),t._v(" "),s("el-col",{staticClass:"line",attrs:{span:2}},[t._v("至")]),t._v(" "),s("el-col",{attrs:{span:11}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.regionE,callback:function(e){t.$set(t.form,"regionE",e)},expression:"form.regionE"}},[s("el-option",{attrs:{label:"1",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"2",value:"2"}}),t._v(" "),s("el-option",{attrs:{label:"3",value:"3"}}),t._v(" "),s("el-option",{attrs:{label:"4",value:"4"}}),t._v(" "),s("el-option",{attrs:{label:"5",value:"5"}}),t._v(" "),s("el-option",{attrs:{label:"6",value:"6"}}),t._v(" "),s("el-option",{attrs:{label:"7",value:"7"}}),t._v(" "),s("el-option",{attrs:{label:"8",value:"8"}}),t._v(" "),s("el-option",{attrs:{label:"9",value:"9"}}),t._v(" "),s("el-option",{attrs:{label:"10",value:"10"}}),t._v(" "),s("el-option",{attrs:{label:"11",value:"11"}}),t._v(" "),s("el-option",{attrs:{label:"12",value:"12"}}),t._v(" "),s("el-option",{attrs:{label:"13",value:"13"}}),t._v(" "),s("el-option",{attrs:{label:"14",value:"14"}}),t._v(" "),s("el-option",{attrs:{label:"15",value:"15"}}),t._v(" "),s("el-option",{attrs:{label:"16",value:"16"}}),t._v(" "),s("el-option",{attrs:{label:"17",value:"17"}}),t._v(" "),s("el-option",{attrs:{label:"18",value:"18"}}),t._v(" "),s("el-option",{attrs:{label:"19",value:"19"}}),t._v(" "),s("el-option",{attrs:{label:"20",value:"20"}}),t._v(" "),s("el-option",{attrs:{label:"21",value:"21"}}),t._v(" "),s("el-option",{attrs:{label:"22",value:"22"}}),t._v(" "),s("el-option",{attrs:{label:"23",value:"23"}}),t._v(" "),s("el-option",{attrs:{label:"24",value:"24"}}),t._v(" "),s("el-option",{attrs:{label:"25",value:"25"}}),t._v(" "),s("el-option",{attrs:{label:"26",value:"26"}}),t._v(" "),s("el-option",{attrs:{label:"27",value:"27"}}),t._v(" "),s("el-option",{attrs:{label:"28",value:"28"}}),t._v(" "),s("el-option",{attrs:{label:"29",value:"29"}}),t._v(" "),s("el-option",{attrs:{label:"30",value:"30"}}),t._v(" "),s("el-option",{attrs:{label:"31",value:"31"}}),t._v(" "),s("el-option",{attrs:{label:"32",value:"32"}}),t._v(" "),s("el-option",{attrs:{label:"33",value:"33"}}),t._v(" "),s("el-option",{attrs:{label:"34",value:"34"}}),t._v(" "),s("el-option",{attrs:{label:"35",value:"35"}}),t._v(" "),s("el-option",{attrs:{label:"36",value:"36"}}),t._v(" "),s("el-option",{attrs:{label:"37",value:"37"}}),t._v(" "),s("el-option",{attrs:{label:"38",value:"38"}}),t._v(" "),s("el-option",{attrs:{label:"39",value:"39"}}),t._v(" "),s("el-option",{attrs:{label:"40",value:"40"}})],1)],1)],1):t._e(),t._v(" "),"POSTPARTUM"==t.form.apply?s("el-form-item",{attrs:{label:""}},[s("el-col",{attrs:{span:11}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.regionS,callback:function(e){t.$set(t.form,"regionS",e)},expression:"form.regionS"}},[s("el-option",{attrs:{label:"产后0天",value:"0"}}),t._v(" "),s("el-option",{attrs:{label:"产后42天",value:"42"}}),t._v(" "),s("el-option",{attrs:{label:"产后6个月",value:"180"}}),t._v(" "),s("el-option",{attrs:{label:"产后1年",value:"365"}}),t._v(" "),s("el-option",{attrs:{label:"产后2年",value:"720"}}),t._v(" "),s("el-option",{attrs:{label:"产后3年",value:"1095"}})],1)],1),t._v(" "),s("el-col",{staticClass:"line",attrs:{span:2}},[t._v("至")]),t._v(" "),s("el-col",{attrs:{span:11}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.regionE,callback:function(e){t.$set(t.form,"regionE",e)},expression:"form.regionE"}},[s("el-option",{attrs:{label:"产后0天",value:"0"}}),t._v(" "),s("el-option",{attrs:{label:"产后42天",value:"42"}}),t._v(" "),s("el-option",{attrs:{label:"产后6个月",value:"180"}}),t._v(" "),s("el-option",{attrs:{label:"产后1年",value:"365"}}),t._v(" "),s("el-option",{attrs:{label:"产后2年",value:"720"}}),t._v(" "),s("el-option",{attrs:{label:"产后3年",value:"1095"}})],1)],1)],1):t._e(),t._v(" "),s("el-form-item",{attrs:{label:"生效时间"}},[s("el-radio-group",{model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}},[s("el-radio",{attrs:{label:"0"}},[t._v("自定义时间")]),t._v(" "),s("el-radio",{attrs:{label:"1"}},[t._v("长期有效")])],1)],1),t._v(" "),"0"==t.form.time?s("el-form-item",{attrs:{label:""}},[s("el-col",{attrs:{span:11}},[s("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始日期时间"},model:{value:t.form.startT,callback:function(e){t.$set(t.form,"startT",e)},expression:"form.startT"}})],1),t._v(" "),s("el-col",{staticClass:"line",attrs:{span:2}},[t._v("-")]),t._v(" "),s("el-col",{attrs:{span:11}},[s("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束日期时间"},model:{value:t.form.endT,callback:function(e){t.$set(t.form,"endT",e)},expression:"form.endT"}})],1)],1):t._e(),t._v(" "),s("el-form-item",{attrs:{label:"说明"}},[s("div",{staticClass:"explain"},[s("div",[t._v("1、每个选项可配置分数，根据用户选择的选项将所对应的分数全部累加起来，按照分数来匹配结果文案并展示。")]),t._v(" "),s("div",[t._v("2、选项分数不会在用户端展示，只作为测试的逻辑设置。")]),t._v(" "),s("div",[t._v("3、选项分数请输入阿拉伯数字，若不填，将默认为 0。")])])])],1)],1),t._v(" "),t._l(t.questionArr,function(e,a){return s("div",{key:a},[s("div",{staticClass:"main_title"},[s("div",{staticClass:"question_title question_p"},[t._v("题目"+t._s(a+1))]),t._v(" "),s("div",{staticClass:"icons_con"},[s("div",{staticClass:"icons",on:{click:t.addQuestion}},[s("i",{staticClass:"el-icon-plus"})]),t._v(" "),s("div",{staticClass:"icons",on:{click:function(e){t.moveUp(a)}}},[s("i",{staticClass:"el-icon-arrow-up"})]),t._v(" "),s("div",{staticClass:"icons",on:{click:function(e){t.moveDown(a)}}},[s("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),s("div",{on:{click:function(s){t.delQuestion(a,e)}}},[s("i",{staticClass:"el-icon-delete"})])])]),t._v(" "),s("div",{staticClass:"baseInfo_main"},[s("div",{staticClass:"q_main"},[s("div",{staticClass:"q_name"},[t._v("题目类型")]),t._v(" "),s("el-select",{attrs:{placeholder:"请选择题目类型"},model:{value:e.qType,callback:function(s){t.$set(e,"qType",s)},expression:"item.qType"}},t._l(e.options,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),s("div",{staticClass:"q_main"},[s("div",{staticClass:"q_name"},[t._v("题干")]),t._v(" "),s("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入题干"},model:{value:e.textarea,callback:function(s){t.$set(e,"textarea","string"==typeof s?s.trim():s)},expression:"item.textarea"}})],1),t._v(" "),"QA"!=e.qType?s("div",{staticStyle:{"margin-left":"20px"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[s("el-table-column",{attrs:{prop:"opt",label:"选项",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{label:"选项内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-input",{attrs:{placeholder:"请输入选项内容"},model:{value:e.row.optCon,callback:function(s){t.$set(e.row,"optCon","string"==typeof s?s.trim():s)},expression:"scope.row.optCon"}})]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"选项得分"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-input",{attrs:{placeholder:"请输入选项得分"},model:{value:e.row.score,callback:function(s){t.$set(e.row,"score","string"==typeof s?s.trim():s)},expression:"scope.row.score"}})]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(i){return[s("div",{staticStyle:{color:"#3C93E2","font-size":"25px"}},[s("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(e){t.optAdd(a)}}}),t._v(" "),s("i",{staticClass:"el-icon-arrow-up",on:{click:function(e){t.optUp(a,i.$index)}}}),t._v(" "),s("i",{staticClass:"el-icon-arrow-down",on:{click:function(e){t.optDown(a,i.$index)}}}),t._v(" "),s("i",{staticClass:"el-icon-delete",on:{click:function(s){t.optDel(a,i.$index,e,i.row)}}})])]}}])})],1)],1):t._e()])])}),t._v(" "),s("div",{staticClass:"question_title",staticStyle:{padding:"20px 0"}},[t._v("结果文案")]),t._v(" "),s("div",{staticClass:"baseInfo_main"},[s("div",{staticStyle:{"margin-left":"20px"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableAnswer,border:""}},[s("el-table-column",{attrs:{label:"得分区间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticStyle:{display:"flex","align-items":"center"}},[s("el-input",{model:{value:e.row.scoreS,callback:function(s){t.$set(e.row,"scoreS","string"==typeof s?s.trim():s)},expression:"scope.row.scoreS"}}),t._v("-\n                "),s("el-input",{model:{value:e.row.scoreE,callback:function(s){t.$set(e.row,"scoreE","string"==typeof s?s.trim():s)},expression:"scope.row.scoreE"}})],1)]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"结果文案"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-input",{attrs:{placeholder:"请输入结果文案"},model:{value:e.row.AnswerResult,callback:function(s){t.$set(e.row,"AnswerResult","string"==typeof s?s.trim():s)},expression:"scope.row.AnswerResult"}})]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticStyle:{color:"#3C93E2","font-size":"25px"}},[s("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(e){t.answerAdd()}}}),t._v(" "),s("i",{staticClass:"el-icon-delete",on:{click:function(s){t.answerDel(e.$index,e.row)}}})])]}}])})],1),t._v(" "),s("div",{staticStyle:{margin:"50px  0 40px 0"}},[s("el-button",{attrs:{type:"primary",round:""},on:{click:t.preview}},[t._v("预览")]),t._v(" "),s("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){t.holdData("PUBLISH")}}},[t._v("保存并发布")]),t._v(" "),s("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){t.holdData("NORMAL")}}},[t._v("保存")]),t._v(" "),s("el-button",{attrs:{round:""},on:{click:t.cancel}},[t._v("取消")])],1)],1)]),t._v(" "),s("el-dialog",{attrs:{title:"预览",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("div",[s("div",{staticClass:"preview_height"},[s("span",{staticClass:"preview_name"},[t._v("测试类型:")]),t._v(" "),s("span",[t._v(t._s(t.form.testType))])]),t._v(" "),s("div",{staticClass:"preview_height"},[s("span",{staticClass:"preview_name"},[t._v("测试名称:")]),t._v(" "),s("span",[t._v(t._s(t.form.name))])]),t._v(" "),s("div",{staticClass:"preview_height"},[s("span",{staticClass:"preview_name"},[t._v("卷首语:")]),t._v(" "),s("div",{staticStyle:{display:"inline-grid","min-width":"500px","word-break":"break-all"},attrs:{id:"preview_con"},domProps:{innerHTML:t._s(t.contentTxt)}})]),t._v(" "),s("div",{staticClass:"preview_height"},[s("span",{staticClass:"preview_name"},[t._v("适应阶段:")]),t._v(" "),s("span",[t._v(t._s(t.adaptation()))])]),t._v(" "),s("div",{staticClass:"preview_height",staticStyle:{"margin-bottom":"30px"}},[s("span",{staticClass:"preview_name"},[t._v("有效期:")]),t._v(" "),s("span",[t._v(t._s(t.timeDate()))])]),t._v(" "),s("div",{staticStyle:{"margin-bottom":"30px"}},t._l(t.questionArr,function(e,a){return s("div",{key:a},[s("div",{staticClass:"preview_height preview_l"},[s("span",[t._v("Q"+t._s(a+1)+"、")]),t._v(" "),s("span",{staticClass:"preview_t"},[t._v("("+t._s(t.typeFilter(e.qType))+")")]),t._v(" "),s("span",[t._v(t._s(e.textarea))])]),t._v(" "),t._l(e.tableData,function(a,i){return s("div",{key:i+86431},["QA"!=e.qType?s("div",{staticClass:"preview_height preview_opt_l"},[s("span",[t._v(t._s(a.opt)+"、")]),t._v(" "),s("span",[t._v(t._s(a.optCon))]),t._v(" "),s("span",{staticClass:"preview_score"},[t._v("("+t._s(a.score)+"分)")])]):t._e()])})],2)})),t._v(" "),t._l(t.tableAnswer,function(e,a){return s("div",{key:a+15807},[s("div",{staticClass:"preview_height preview_l"},[s("span",[t._v(t._s(e.scoreS))]),t._v(" "),s("span",[t._v("-")]),t._v(" "),s("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(e.scoreE)+":")]),t._v(" "),s("span",[t._v(t._s(e.AnswerResult))])])])})],2),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)])],2)},staticRenderFns:[]};var p=s("VU/8")(r,n,!1,function(t){s("mTjL")},"data-v-4fb5a456",null);e.default=p.exports},mTjL:function(t,e){}});