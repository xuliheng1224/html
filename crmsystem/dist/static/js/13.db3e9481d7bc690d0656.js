webpackJsonp([13],{"89xn":function(t,e){},DMrM:function(t,e){},jqmd:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("vQ9I"),s=a("s0MJ"),i={data:function(){return{name:"",server:"",time:"",total:0,bars:10,background:"#999999",labelPosition:"left",tableData:[],currPage:1,pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]}}},props:["option"],methods:{too:function(t){return t>0?s.tool.dateFormat(new Date(t)):""},search:function(){this.currPage=1;var t={keyWord:this.name,serviceCode:this.server,checkStartTime:this.time?s.tool.dateFormat(this.time[0]):"",checkEndTime:this.time?s.tool.dateFormat(this.time[1]):""};this.getList(t)},clear:function(){this.name="",this.server="",this.time=""},back:function(){this.$emit("toParent")},sizeChange:function(t){this.bars=t;var e={pageNo:this.currPage,pageSize:t,keyWord:this.name,serviceCode:this.server,checkStartTime:this.time?s.tool.dateFormat(this.time[0]):"",checkEndTime:this.time?s.tool.dateFormat(this.time[1]):""};this.getList(e)},currentChange:function(t){this.currPage=t;var e={pageNo:t,pageSize:this.bars,keyWord:this.name,serviceCode:this.server,checkStartTime:this.time?s.tool.dateFormat(this.time[0]):"",checkEndTime:this.time?s.tool.dateFormat(this.time[1]):""};this.getList(e)},getList:function(t){var e=this;Object(o.a)({url:"/crm/check/checkLog",method:"get",params:t,success:function(t){"0000"===t.data.code?(e.tableData=t.data.data.list,e.total=t.data.data.totalCount):e.$message.error(t.data.msg)},fail:function(t){console.log(t)}},this)}},mounted:function(){this.getList()}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"search"},[a("el-button",{staticClass:"back",attrs:{type:"primary"},on:{click:t.back}},[t._v("返回")]),t._v(" "),a("div",{staticClass:"search_content"},[a("el-form",{attrs:{"label-position":t.labelPosition,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"核销用户"}},[a("el-input",{attrs:{placeholder:"请输入用户名或手机号"},model:{value:t.name,callback:function(e){t.name="string"==typeof e?e.trim():e},expression:"name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"核销时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange","picker-options":t.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1)],1),t._v(" "),a("el-form",{attrs:{"label-position":t.labelPosition,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"选择服务"}},[a("el-select",{staticStyle:{width:"97%"},attrs:{placeholder:"请选择"},model:{value:t.server,callback:function(e){t.server=e},expression:"server"}},t._l(t.option,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1)],1)],1),t._v(" "),a("el-button",{staticClass:"suresearch",attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),a("el-button",{staticClass:"clear",attrs:{type:"primary"},on:{click:t.clear}},[t._v("清除")])],1),t._v(" "),a("div",{staticStyle:{width:"100%",background:"rgba(255,255,255,1)","padding-bottom":"20px","box-sizing":"border-box"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"serviceName",label:"核销服务","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"realName",label:"核销用户","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"packName",label:"所属服务卡","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"核销时间","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.too(e.row.checkTime)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"updateUserId",label:"操作人","show-overflow-tooltip":""}})],1),t._v(" "),a("div",{staticClass:"footers"},[a("el-pagination",{attrs:{background:"","current-page":t.currPage,"page-sizes":[10,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange}})],1)],1)])},staticRenderFns:[]};var r={components:{Record:a("VU/8")(i,c,!1,function(t){a("DMrM")},"data-v-038218af",null).exports},data:function(){return{isRecord:!0,allCheckCount:0,todayCheckCount:0,yesterdayCheckCount:0,time:"",server:"",tel:"",check:"",options:[],auth:[]}},methods:{del:function(){var t=this;Object(o.a)({url:"/crm/check/check",method:"post",data:{checkCode:this.check,serviceCode:this.server,mobile:this.tel},success:function(e){"0000"===e.data.code?t.$notify({title:"核销成功",type:"success"}):t.$message.error(e.data.msg)},fail:function(t){console.log(t)}},this)},record:function(){this.isRecord=!1},Parent:function(){this.isRecord=!0}},mounted:function(){var t=this;this.time=s.tool.dateFormat(new Date),this.auth=s.tool.localStorage.get("authTags"),Object(o.a)({url:"/crm/check/checkManage",method:"get",success:function(e){"0000"===e.data.code?(t.allCheckCount=e.data.data.allCheckCount,t.todayCheckCount=e.data.data.todayCheckCount,t.yesterdayCheckCount=e.data.data.yesterdayCheckCount):t.$message.error(e.data.msg)},fail:function(t){console.log(t)}},this),Object(o.a)({url:"/crm/check/serviceNameList",method:"get",success:function(e){"0000"===e.data.code?t.options=e.data.data:t.$message.error(e.data.msg)},fail:function(t){console.log(t)}},this)}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isRecord?a("div",{staticClass:"cancellation_content"},[a("div",[a("div",[a("h3",[t._v("核销管理")]),t._v(" "),a("p",{staticStyle:{"margin-top":"10px"}},[t._v("更新时间: "),a("span",[t._v(t._s(t.time))])])]),t._v(" "),t.auth.indexOf("check_record_list")>-1?a("el-button",{staticClass:"see",attrs:{type:"primary"},on:{click:t.record}},[t._v("查看审核记录")]):t._e()],1),t._v(" "),a("div",{staticClass:"bigbox"},[a("el-card",{staticClass:"box-card"},[a("p",[t._v("总核销数")]),t._v(" "),a("h1",[t._v(t._s(t.allCheckCount))])]),t._v(" "),a("el-card",{staticClass:"box-card"},[a("p",[t._v("今日核销总数")]),t._v(" "),a("h1",[t._v(t._s(t.todayCheckCount))])]),t._v(" "),a("el-card",{staticClass:"box-card"},[a("p",[t._v("昨日核销总数")]),t._v(" "),a("h1",[t._v(t._s(t.yesterdayCheckCount))])])],1),t._v(" "),a("div",{staticClass:"choose"},[a("div",{staticClass:"choose_content"},[a("span",[t._v("选择服务")]),t._v(" "),a("el-select",{staticStyle:{width:"362px"},attrs:{placeholder:"请选择"},model:{value:t.server,callback:function(e){t.server=e},expression:"server"}},t._l(t.options,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("div",{staticClass:"choose_content"},[a("span",[t._v("手机")]),t._v(" "),a("el-input",{staticStyle:{width:"362px"},attrs:{placeholder:"请输入手机号"},model:{value:t.tel,callback:function(e){t.tel="string"==typeof e?e.trim():e},expression:"tel"}})],1),t._v(" "),a("div",{staticClass:"choose_content"},[a("span",[t._v("验证码")]),t._v(" "),a("el-input",{staticStyle:{width:"362px"},attrs:{placeholder:"输入验证码"},model:{value:t.check,callback:function(e){t.check="string"==typeof e?e.trim():e},expression:"check"}})],1),t._v(" "),a("div",{staticClass:"choose_content"},[t.auth.indexOf("check_submit")>-1?a("el-button",{attrs:{type:"primary"},on:{click:t.del}},[t._v("核销")]):t._e()],1)])]):t._e(),t._v(" "),t.isRecord?t._e():a("Record",{attrs:{option:t.options},on:{toParent:t.Parent}})],1)},staticRenderFns:[]};var l=a("VU/8")(r,n,!1,function(t){a("89xn")},"data-v-a64e0008",null);e.default=l.exports}});